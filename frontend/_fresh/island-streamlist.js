import{a as e}from"./chunk-BCE34AQ5.js";import{a as l,d as o}from"./chunk-TI4L7M5E.js";import"./chunk-CFTXCTKY.js";var c={excellent:"border-green-500 bg-green-50",good:"border-blue-500 bg-blue-50",fair:"border-yellow-500 bg-yellow-50",poor:"border-red-500 bg-red-50"},p={excellent:"bg-green-500",good:"bg-blue-500",fair:"bg-yellow-500",poor:"bg-red-500"};function g({streams:i,apiUrl:n}){let d=o({}),a=o(new Set);return l(()=>{i.forEach(s=>{d.value[s.id]||a.value.has(s.id)||(a.value=new Set([...a.value,s.id]),fetch(`${n}/api/streams/${s.id}/conditions`).then(t=>t.json()).then(t=>{t.success&&t.data&&(d.value={...d.value,[s.id]:t.data})}).catch(console.error).finally(()=>{let t=new Set(a.value);t.delete(s.id),a.value=t}))})},[i,n]),i.length===0?e("div",{class:"bg-slate-100 rounded-lg p-6 text-center",children:e("p",{class:"text-slate-600",children:"No streams found"})}):e("div",{class:"grid gap-4",children:i.map(s=>{let t=d.value[s.id],r=a.value.has(s.id);return e("a",{href:`/streams/${s.id}`,class:`block bg-white rounded-lg border-l-4 p-4 shadow hover:shadow-md transition ${t?c[t.fishingQuality]:"border-slate-300"}`,children:[e("div",{class:"flex items-start justify-between",children:[e("div",{children:[e("h3",{class:"font-semibold text-lg text-slate-800",children:s.name}),e("p",{class:"text-sm text-slate-500 capitalize",children:[s.region," \u2022 ",s.state]})]}),r&&e("div",{class:"w-3 h-3 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}),t&&e("span",{class:`px-2 py-1 rounded text-xs text-white font-medium ${p[t.fishingQuality]}`,children:t.fishingQuality})]}),t&&e("div",{class:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.stationData[0]?.waterTempF&&e("div",{children:[e("span",{class:"text-slate-500",children:"Water"}),e("p",{class:"font-medium",children:[t.stationData[0].waterTempF,"\xB0F"]})]}),t.weather&&e("div",{children:[e("span",{class:"text-slate-500",children:"Air"}),e("p",{class:"font-medium",children:[t.weather.airTempF,"\xB0F"]})]}),t.stationData[0]?.dischargeCfs&&e("div",{children:[e("span",{class:"text-slate-500",children:"Flow"}),e("p",{class:"font-medium",children:[t.stationData[0].dischargeCfs," cfs"]})]}),t.predictedHatches.length>0&&e("div",{children:[e("span",{class:"text-slate-500",children:"Top Hatch"}),e("p",{class:"font-medium",children:t.predictedHatches[0].hatch.commonName})]})]}),e("div",{class:"mt-2 text-xs text-slate-400",children:[s.stationIds.length," USGS station",s.stationIds.length!==1?"s":""]})]},s.id)})})}export{g as default};
