import{a as s}from"./chunk-BCE34AQ5.js";import{d as l}from"./chunk-TI4L7M5E.js";import"./chunk-CFTXCTKY.js";var r={excellent:"bg-green-100 border-green-500",good:"bg-blue-100 border-blue-500",fair:"bg-yellow-100 border-yellow-500",poor:"bg-red-100 border-red-500"},p={high:"bg-green-500",medium:"bg-yellow-500",low:"bg-slate-400"};function m({conditions:d,apiUrl:o}){let n=l(d),a=l(!1);async function c(){a.value=!0;try{let i=await(await fetch(`${o}/api/streams/${d.stream.id}/conditions`)).json();i.success&&i.data&&(n.value=i.data)}catch(e){console.error("Failed to refresh:",e)}finally{a.value=!1}}let t=n.value;return s("div",{class:`rounded-lg border-l-4 shadow-lg ${r[t.fishingQuality]}`,children:[s("div",{class:"p-6 border-b border-slate-200",children:[s("div",{class:"flex items-start justify-between",children:[s("div",{children:[s("h1",{class:"text-2xl font-bold text-slate-800",children:t.stream.name}),s("p",{class:"text-slate-600 capitalize",children:[t.stream.region," \u2022 ",t.stream.state]})]}),s("button",{onClick:c,disabled:a.value,class:"p-2 rounded-full hover:bg-white/50 transition disabled:opacity-50",title:"Refresh conditions",children:s("span",{class:a.value?"animate-spin inline-block":"",children:"\u{1F504}"})})]}),s("div",{class:"mt-4",children:[s("span",{class:"text-lg font-semibold capitalize",children:[t.fishingQuality," Conditions"]}),s("p",{class:"text-slate-600 mt-1",children:t.summary})]})]}),s("div",{class:"p-6 bg-white",children:[s("h2",{class:"text-lg font-semibold text-slate-800 mb-4",children:"Current Readings"}),s("div",{class:"grid md:grid-cols-2 gap-6",children:[s("div",{class:"space-y-3",children:[s("h3",{class:"font-medium text-slate-700",children:"\u{1F4A7} Water Conditions"}),t.stationData.map(e=>s("div",{class:"bg-slate-50 rounded p-3 text-sm",children:[s("p",{class:"text-slate-500 text-xs mb-2",children:e.stationName}),s("div",{class:"grid grid-cols-3 gap-2",children:[e.waterTempF&&s("div",{children:[s("span",{class:"text-slate-500 block",children:"Temp"}),s("span",{class:"font-semibold",children:[e.waterTempF,"\xB0F"]})]}),e.dischargeCfs&&s("div",{children:[s("span",{class:"text-slate-500 block",children:"Flow"}),s("span",{class:"font-semibold",children:[e.dischargeCfs," cfs"]})]}),e.gageHeightFt&&s("div",{children:[s("span",{class:"text-slate-500 block",children:"Gage"}),s("span",{class:"font-semibold",children:[e.gageHeightFt," ft"]})]})]})]},e.stationId))]}),t.weather&&s("div",{class:"space-y-3",children:[s("h3",{class:"font-medium text-slate-700",children:"\u{1F324}\uFE0F Weather"}),s("div",{class:"bg-slate-50 rounded p-3",children:[s("p",{class:"font-semibold",children:t.weather.shortForecast}),s("div",{class:"grid grid-cols-2 gap-2 mt-2 text-sm",children:[s("div",{children:[s("span",{class:"text-slate-500",children:"Air Temp:"})," ",s("span",{class:"font-medium",children:[t.weather.airTempF,"\xB0F"]})]}),s("div",{children:[s("span",{class:"text-slate-500",children:"Wind:"})," ",s("span",{class:"font-medium",children:[t.weather.windSpeedMph," mph"]})]}),s("div",{children:[s("span",{class:"text-slate-500",children:"Cloud Cover:"})," ",s("span",{class:"font-medium",children:[t.weather.cloudCoverPercent,"%"]})]}),s("div",{children:[s("span",{class:"text-slate-500",children:"Precip:"})," ",s("span",{class:"font-medium",children:[t.weather.precipProbability,"%"]})]})]})]})]})]})]}),t.predictedHatches.length>0&&s("div",{class:"p-6 border-t border-slate-200",children:[s("h2",{class:"text-lg font-semibold text-slate-800 mb-4",children:"\u{1FAB0} Predicted Hatches"}),s("div",{class:"space-y-3",children:t.predictedHatches.map(e=>s("div",{class:"bg-white border rounded-lg p-4 flex items-start justify-between",children:[s("div",{class:"flex-1",children:[s("div",{class:"flex items-center gap-2",children:[s("h3",{class:"font-semibold",children:e.hatch.commonName}),s("span",{class:`px-2 py-0.5 rounded text-xs text-white ${p[e.confidence]}`,children:e.confidence})]}),e.hatch.scientificName&&s("p",{class:"text-slate-500 text-sm italic",children:e.hatch.scientificName}),s("p",{class:"text-sm text-slate-600 mt-1",children:e.reasoning}),s("div",{class:"text-xs text-slate-500 mt-2",children:[s("span",{class:"capitalize",children:e.hatch.order})," \u2022 ","Hook sizes: ",e.hatch.hookSizes.join(", ")," \u2022 ",e.hatch.timeOfDay," emergence"]})]}),s("div",{class:"text-right",children:s("span",{class:"text-2xl font-bold text-slate-700",children:[Math.round(e.probability*100),"%"]})})]},e.hatch.id))})]}),s("div",{class:"p-4 bg-slate-100 text-xs text-slate-500 rounded-b-lg",children:["Last updated: ",new Date(t.timestamp).toLocaleString()]})]})}export{m as default};
